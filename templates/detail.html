{% extends "base.html" %} {% block title %}{{ product.title }} Â· Catalog{%
endblock %} {% block content %}
<div class="mb-3 d-flex justify-content-between align-items-center">
  <a class="btn btn-outline-secondary" href="{{ back_href }}"
    ><i class="bi bi-arrow-left me-1"></i>Back to catalog</a
  >
</div>

<div class="card shadow-sm border-0 mb-4">
  <div class="card-body">
    <div class="row g-4">
      <div class="col-12 col-lg-6">
        {% if product.images and product.images|length > 0 %}
        <div
          id="productCarousel"
          class="carousel slide"
          data-bs-ride="carousel"
        >
          <div class="carousel-indicators">
            {% for img in product.images %}
            <button
              type="button"
              data-bs-target="#productCarousel"
              data-bs-slide-to="{{ loop.index0 }}"
              {%
              if
              loop.first
              %}class="active"
              aria-current="true"
              {%
              endif
              %}
              aria-label="Slide {{ loop.index }}"
            ></button>
            {% endfor %}
          </div>
          <div class="carousel-inner">
            {% for img in product.images %}
            <div class="carousel-item {% if loop.first %}active{% endif %}">
              <img
                src="{{ img }}"
                class="d-block w-100 rounded"
                alt="Image {{ loop.index }}"
                loading="lazy"
                referrerpolicy="no-referrer"
              />
            </div>
            {% endfor %}
          </div>
          <button
            class="carousel-control-prev"
            type="button"
            data-bs-target="#productCarousel"
            data-bs-slide="prev"
          >
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button
            class="carousel-control-next"
            type="button"
            data-bs-target="#productCarousel"
            data-bs-slide="next"
          >
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>

        <div class="thumb-strip row mt-3 gx-2">
          {% for img in product.images %}
          <div class="col-auto mb-2">
            <img
              src="{{ img }}"
              class="img-thumbnail"
              alt="Thumb {{ loop.index }}"
              loading="lazy"
              referrerpolicy="no-referrer"
              data-bs-target="#productCarousel"
              data-bs-slide-to="{{ loop.index0 }}"
              style="cursor: pointer"
            />
          </div>
          {% endfor %}
        </div>
        {% else %}
        <img
          src="https://via.placeholder.com/1200x800?text=No+Image"
          class="img-fluid rounded border"
          alt="No image"
        />
        {% endif %}
      </div>

      <div class="col-12 col-lg-6">
        <h1 class="h3">{{ product.title }}</h1>
        <div class="text-primary fs-3 fw-bold mb-3">
          <i class="bi bi-tag me-1"></i>{{ product.final_price }}
        </div>

        <h2 class="h5 mt-3">Description</h2>
        <p class="mb-0" style="white-space: pre-wrap">
          {{ product.description }}
        </p>
      </div>
    </div>
  </div>
</div>
{% endblock %}
